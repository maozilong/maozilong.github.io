import{n as r}from"./index.a838637d.js";import"./vendor.1d8a023a.js";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-upload",e._g(e._b({class:{hideUpload:e.value.length>=e.limit},attrs:{"list-type":"picture-card",drag:!0,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.onSuccess,"on-error":e.onError,"on-exceed":e.onExceed,"http-request":e.uploadFile,"file-list":e.value}},"el-upload",e.$props,!1),e.$listeners),[o("i",{staticClass:"el-icon-plus",attrs:{title:"\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216\u70B9\u51FB\u4E0A\u4F20"}})]),o("el-dialog",{attrs:{visible:e.dialogVisible,title:"\u56FE\u7247\u9884\u89C8",top:"1vh","append-to-body":""},on:{"update:visible":function(l){e.dialogVisible=l}}},[o("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},s=[];const n={name:"MUpload",props:Object.assign({},{action:{type:String,default:"/file/upload"},limit:{type:Number,default:1},value:{type:Array,default(){return[]}},headers:{type:Object,default(){return{}}}}),data(){return{dialogVisible:!1,dialogImageUrl:""}},watch:{value(e){console.log("watch.value:",e)}},created(){console.log("props:",this.$props)},mounted(){},methods:{handleRemove(e,t){this.$emit("input",t)},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},onExceed(e,t){console.log("onExceed:",e,t),this.$message({message:`\u6700\u591A\u4E0D\u80FD\u8D85\u8FC7${this.limit}\u4E2A\u6587\u4EF6`,type:"error",duration:5*1e3})},onSuccess(e,t,o){if(console.log(e,t,o),e.code===2e4)this.value.push(e.data),this.$emit("input",this.value);else return o.pop(),this.$message({message:e.msg,type:"error",duration:3*1e3}),this.onError(e,t,o),!1},onError(e,t,o){console.log("upload.error:",e,t,o)},uploadFile(e){const t=new FormData;t.append("file",e.file),this.$http.post("/file/upload",t).then(o=>{this.onSuccess(o,e.file,this.value)})}}},a={};var d=r(n,i,s,!1,u,"19dbd2e2",null,null);function u(e){for(let t in a)this[t]=a[t]}var h=function(){return d.exports}();export{h as default};
