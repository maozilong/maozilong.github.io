var f=Object.defineProperty,u=Object.defineProperties;var d=Object.getOwnPropertyDescriptors;var n=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var p=(e,t,a)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,o=(e,t)=>{for(var a in t||(t={}))m.call(t,a)&&p(e,a,t[a]);if(n)for(var a of n(t))h.call(t,a)&&p(e,a,t[a]);return e},i=(e,t)=>u(e,d(t));import{d as _,n as b}from"./index.a838637d.js";import{e as v}from"./vendor.1d8a023a.js";var y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",e._g(e._b({ref:"form",attrs:{model:e.formData,"status-icon":""}},"el-form",e.$props,!1),e.$listeners),[a("el-row",{attrs:{gutter:e.gutter}},e._l(e.columnsRender,function(r,l){return a("el-col",{directives:[{name:"show",rawName:"v-show",value:!r.hide,expression:"!item.hide"}],key:l,attrs:{span:r.span||e.span}},[r.type?a("el-form-item",e._b({},"el-form-item",r,!1),[r.type==="select"?a("el-select",e._g(e._b({model:{value:e.formData[r.prop],callback:function(s){e.$set(e.formData,r.prop,s)},expression:"formData[item.prop]"}},"el-select",r.attr,!1),r.on),e._l(r.options,function(s){return a("el-option",e._b({key:s.value},"el-option",s,!1))}),1):r.type==="radio"?a("el-radio-group",e._g(e._b({model:{value:e.formData[r.prop],callback:function(s){e.$set(e.formData,r.prop,s)},expression:"formData[item.prop]"}},"el-radio-group",r.attr,!1),r.on),e._l(r.options,function(s){return a("el-radio",e._b({key:s.value,attrs:{label:s.value}},"el-radio",s,!1),[e._v(e._s(s.label))])}),1):r.type==="checkbox"?a("el-checkbox-group",e._g(e._b({model:{value:e.formData[r.prop],callback:function(s){e.$set(e.formData,r.prop,s)},expression:"formData[item.prop]"}},"el-checkbox-group",r.attr,!1),r.on),e._l(r.options,function(s){return a("el-checkbox",e._b({key:s.value,attrs:{label:s.value}},"el-checkbox",s,!1),[e._v(e._s(s.label))])}),1):r.type==="upload"?a("MUpload",e._b({model:{value:e.formData[r.prop],callback:function(s){e.$set(e.formData,r.prop,s)},expression:"formData[item.prop]"}},"MUpload",r.attr,!1)):a("el-"+r.type,e._g(e._b({tag:"component",attrs:{options:r.options},nativeOn:{keyup:function(s){if(!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter"))return null;r.attr.type!=="textarea"&&e.submit()}},model:{value:e.formData[r.prop],callback:function(s){e.$set(e.formData,r.prop,s)},expression:"formData[item.prop]"}},"component",r.attr,!1),r.on))],1):e._e()],1)}),1)],1)],1)},g=[];const D={name:"MForm",inheritAttrs:!1,props:Object.assign(o({},v.exports.Form.props),{columns:{type:Array,default(){return[]}},labelWidth:{type:[String],default:"90px"},gutter:{type:[Number],default:10},span:{type:[Number],default:8}}),data(){return{columnsRender:[],formData:{}}},computed:{},watch:{},created(){this.createForm()},mounted(){},methods:{createForm(e={}){this.formData=o({},e),this.columns.forEach(t=>{this.$set(this.formData,t.prop,e[t.prop]!==void 0?e[t.prop]:t.value),t.propName&&this.$set(this.formData,t.propName,e[t.propName]);const a={};if(t.attr||(t.attr={}),a.placeholder=(t.type==="input"?"\u8BF7\u8F93\u5165":"\u8BF7\u9009\u62E9")+t.label,t.type==="date-picker"&&(a.valueFormat="yyyy-MM-dd"),t.type==="upload"&&(t.span=t.span||24,Object.assign(a,{})),t.type==="select"&&(a.filterable=!0,t.request&&this.loadData(t)),t.type==="checkbox"&&(this.formData[t.prop]=this.formData[t.prop]||[]),["select","radio","checkbox"].includes(t.type)&&(t.attr.props=Object.assign({value:"value",label:"label"},t.attr.props),Object.assign(t,{options:[],change:()=>{}},o({},t))),t.dictionary){const l=this.$store.state.app.dictionary[t.dictionary];l?t.options=l.options||[]:console.warn(`\u5B57\u6BB5[${t.prop}-${t.label}]\u672A\u5339\u914D\u5230\u5B57\u5178\u7C7B\u578B\uFF1A${t.dictionary}`)}t.attr=o(o({},a),t.attr),t.rules&&!t.rules.message&&(t.rules.message=a.placeholder)}),this.columnsRender=this.columns.map(t=>{const{attr:a}=t;return i(o({},t),{attr:o({clearable:!0},a)})}),this.columnsRender.forEach(t=>{t.on||(t.on={}),Object.keys(t).forEach(a=>{typeof t[a]=="function"&&(t.on[a]=r=>{if(t.propName){const l=t.options.filter(s=>t.attr.multiple?r.includes(s.value):r===s.value).map(s=>s.label);this.formData[t.propName]=l.join(",")}t[a](r,this)},t[a](this.formData[t.prop],this))})})},submit(e){this.$refs.form.validate(t=>{t?e?e(this.formData):this.$emit("submit",this.formData):console.log("error submit!!")})},setFields(e){Object.keys(e).forEach(t=>{const a=this.columnsRender.filter(r=>r.prop===t)[0];a?_(a,e[t]):console.warn(t,"\u4E0D\u5B58\u5728")})},resetFields(){this.$refs.form.resetFields(),this.createForm()},validate(e){this.$refs.form.validate(e)},validateField(e,t){this.$refs.form.validateField(e,t)},clearValidate(e){this.$refs.form.clearValidate(e)},handleRemove(e,t){console.log(e,t)},handlePictureCardPreview(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},loadData(e){this.$http(e.request).then(t=>{const a=(t.data.records||t.data).map(r=>{const l=r[e.attr.props.value],s=r[e.attr.props.label];return{value:l,label:s}});this.setFields({[e.prop]:{options:a}})})}}},c={};var x=b(D,y,g,!1,k,"73ec6c12",null,null);function k(e){for(let t in c)this[t]=c[t]}var N=function(){return x.exports}();export{N as default};
