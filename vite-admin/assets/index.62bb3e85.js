var u=Object.defineProperty;var f=Object.getOwnPropertySymbols;var m=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var d=(e,s,t)=>s in e?u(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,l=(e,s)=>{for(var t in s||(s={}))m.call(s,t)&&d(e,t,s[t]);if(f)for(var t of f(s))_.call(s,t)&&d(e,t,s[t]);return e};import{n as b}from"./index.a838637d.js";import"./vendor.1d8a023a.js";var $=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("operation",e._g(e._b({attrs:{"selected-rows":e.selectedRows},on:{search:e.search,refresh:e.refresh,open:e.open,del:e.del}},"operation",e.conf.operation,!1),e.$listeners)),t("m-table",e._g(e._b({ref:"table",on:{open:e.open,"selection-change":e.selectionChange},scopedSlots:e._u([e._l(e.conf.table.columns.filter(function(r){return r.slotScope}),function(r){return{key:r.slotScope,fn:function(i){var c=i.scope;return[r.slotScope?e._t(r.slotScope,null,{scope:Object.assign({},c)}):e._e()]}}})],null,!0)},"m-table",e.conf.table,!1),e.$listeners)),t("form-modal",e._g(e._b({ref:"form",on:{refresh:e.refresh}},"form-modal",e.conf.form,!1),e.$listeners))],1)},v=[];const g={name:"Page",components:{},props:{config:{type:Object,default(){return{}}}},data(){return{selectedRows:[],conf:this.one23(this.config)}},created(){},methods:{one23(e){const{operation:s={},table:t={},form:r={},columns:i}=e,c=[...i];return s.columns||(s.columns=c.map(o=>{const n=l({},o),{search:p}=n;return delete n.rules,delete n.search,delete n.value,n.type==="upload"&&delete n.type,Object.keys(n).forEach(a=>{typeof n[a]=="function"&&delete n[a]}),l(l({},n),p)})),t.columns=c.map(o=>{const{table:n}=o;return delete o.table,l(l({},o),n)}),r.columns=c.map(o=>{const{form:n}=o;return delete o.form,l(l({},o),n)}),{operation:s,table:t,form:r}},search(e){console.log("search:",e),this.$listeners.search?this.$emit("search",e):this.$refs.table.search(e)},refresh(){this.$listeners.refresh?this.$emit("refresh"):this.$refs.table.refresh()},open(e,s){this.$listeners.open?this.$emit("open",e,s):this.$refs.form.open(e,s)},del(){const e=this.$refs.table.selectedRows.map(t=>t.id),s=this.$refs.table.selectedIndex;this.$listeners.del?this.$emit("del",e,s):this.$refs.table.del({id:e},s)},selectionChange(e){this.selectedRows=e}}},h={};var y=b(g,$,v,!1,j,null,null,null);function j(e){for(let s in h)this[s]=h[s]}var w=function(){return y.exports}();export{w as default};
